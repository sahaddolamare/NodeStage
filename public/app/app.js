angular.module("stage",["ngResource","ngRoute","ui.gravatar","ngAnimate"]),angular.module("stage").config(["$routeProvider","$locationProvider",function(e,t){var r={admin:{auth:["stAuthSvc",function(e){return e.authorizeCurrentUserForRoute("admin")}]},user:{auth:["stAuthSvc",function(e){return e.authorizeAuthenticatedUserForRoute()}]},guest:{auth:["stAuthSvc",function(e){return e.unauthenticatedUser()}]}};t.html5Mode(!0),e.when("/",{templateUrl:"/partials/main/main",controller:"stMainCtrl"}).when("/admin",{templateUrl:"/partials/admin/views/admin",controller:"stAdminCtrl",resolve:r.admin}).when("/admin/ddb",{templateUrl:"/partials/admin/views/dev-dashboard",controller:"stDevDbCtrl",resolve:r.admin}).when("/admin/users/add",{templateUrl:"/partials/admin/views/add-user",controller:"stAdminCtrl",resolve:r.admin}).when("/admin/users/delete",{templateUrl:"/partials/admin/views/delete-user",controller:"stAdminCtrl",resolve:r.admin}).when("/admin/users/purge",{templateUrl:"/partials/admin/views/purge-users",controller:"stAdminCtrl",resolve:r.admin}).when("/admin/users/sync",{templateUrl:"/partials/admin/views/sync-users",controller:"stAdminCtrl",resolve:r.admin}).when("/login",{templateUrl:"/partials/account/views/login",controller:"stLoginCtrl",resolve:r.guest}).when("/signup",{templateUrl:"/partials/account/views/signup",controller:"stSignupCtrl",resolve:r.guest}).when("/settings",{templateUrl:"/partials/account/views/settings",controller:"stProfileCtrl",resolve:r.user}).otherwise({redirectTo:"/"})}]),angular.module("stage").run(["$rootScope","$location",function(e,t){e.$on("$routeChangeError",function(e,r,n,o){"not authorized"===o&&t.path("/")})}]),angular.module("stage").factory("stAuthSvc",["$http","$q","stIdentitySvc","stUserSvc",function(e,t,r,n){return{authenticateUser:function(o,s){var a=t.defer();return e.post("/login",{username:o,password:s}).then(function(e){if(e.data.success){var t=new n;delete e.data.user.hashed_pwd,delete e.data.user.salt,angular.extend(t,e.data.user),r.currentUser=t,a.resolve(!0)}else a.resolve(!1)}),a.promise},createUser:function(e){var r=new n(e),o=t.defer();return r.$save().then(function(){o.resolve()},function(e){o.reject(e.data.reason)}),o.promise},logoutUser:function(){var n=t.defer();return e.post("/logout",{logout:!0}).then(function(){r.currentUser=void 0,n.resolve()}),n.promise},purgeUsers:function(){var r=t.defer();return e({method:"PURGE",url:"/api/users"}).then(function(){console.log("User database has been purged"),r.resolve()}),r.promise},syncUsers:function(r){var n=t.defer();return e({method:"COPY",url:"/api/db",headers:{"Content-Type":"application/json"},data:{collection:"users",direction:r}}).then(function(){console.log("User database has been synced"),n.resolve()}),n.promise},updateCurrentUser:function(e){var n=t.defer(),o=angular.copy(r.currentUser);return angular.extend(o,e),o.$update().then(function(){r.currentUser=o,n.resolve()},function(e){n.reject(e.data.reason)}),n.promise},authorizeAuthenticatedUserForRoute:function(){return r.isAuthenticated()?!0:t.reject("not authorized")},authorizeCurrentUserForRoute:function(e){return r.isAuthorized(e)?!0:t.reject("not authorized")},unauthenticatedUser:function(){return r.isAuthenticated()?t.reject("user signed in"):!0}}}]),angular.module("stage").factory("stIdentitySvc",["$window","stUserSvc",function(e,t){var r;return e.stageUser&&(r=new t,delete e.stageUser.hashed_pwd,delete e.stageUser.salt,angular.extend(r,e.stageUser)),{currentUser:r,isAuthenticated:function(){return!!this.currentUser},isAuthorized:function(e){return!!this.currentUser&&this.currentUser.roles.indexOf(e)>-1}}}]),angular.module("stage").controller("stLoginCtrl",["$scope","$location","stAuthSvc","stIdentitySvc","stTickerSvc",function(e,t,r,n,o){e.identity=n,e.signin=function(s,a){return!s||!a||s.$invalid||a.$invalid?(s&&!s.$invalid||$(loginWidget.username).addClass("invalid"),a&&!a.$invalid||$(loginWidget.password).addClass("invalid"),o.error("Please enter a valid email address and password."),!1):void r.authenticateUser(s,a).then(function(r){if(r){s="",a="",e.username="",e.password="";var u=n.isAuthorized("admin")?"/admin":"/";o.notify("You have been successfully authenticated."),t.path("login")&&t.path(u),n.isAuthorized("admin")&&t.path(u)}else o.error("Invalid email address or password was given.")})},e.signout=function(){r.logoutUser().then(function(){e.username="",e.password="",o.notify("You have been signed out."),t.path("/")})}}]),angular.module("stage").directive("stLoginWidget",function(){return{restrict:"E",replace:!0,templateUrl:"/partials/account/views/login-widget"}}),angular.module("stage").controller("stProfileCtrl",["$scope","stAuthSvc","stIdentitySvc","stTickerSvc",function(e,t,r,n){e.email=r.currentUser.userName,e.firstName=r.currentUser.firstName,e.lastName=r.currentUser.lastName,e.update=function(){var r={userName:e.email,firstName:e.firstName,lastName:e.lastName};e.password&&e.password.length>0&&(r.password=e.password),t.updateCurrentUser(r).then(function(){n.notify("Your profile has been updated.")},function(e){n.error(e)})}}]),angular.module("stage").factory("stUserSvc",["$resource",function(e){var t=e("/api/users/:id",{_id:"@id"},{update:{method:"PUT",isArray:!1},purge:{method:"PURGE",isArray:!1}});return t.prototype.isAdmin=function(){return this.roles&&this.roles.indexOf("admin")>-1},t}]),angular.module("stage").controller("stAdminCtrl",["$scope","$timeout","stAdminSvc","stAdminUserSvc","stAuthSvc","stTickerSvc",function(e,t,r,n,o,s){e.env=r.whatEnv(),e.users=n.populateUsers(),e.userRes=e.users,e.userField="userName",e.userReverse=!1,e.userCurrentPage=0,e.userShowOnPage="10",e.userSyncEnabled="development"==e.env,e.userSyncDir="toloc",e.filterUsers=function(){e.userRes=[];var t=n.searchUsers(e.users,e.userSearch);e.userRes=t,e.userCurrentPage=0},e.sortUsers=function(t,r){e.userReverse=e.userField===t?!e.userReverse:!1,r&&(e.userReverse=e.userField===t?e.userReverse:!0),e.userField=t},e.createUser=function(){var t={userName:e.email,password:e.password,firstName:e.firstName,lastName:e.lastName};o.createUser(t).then(function(){s.notify("Created user account "+t.userName+"."),r.adminRedirect("/admin")},function(e){s.error(e)})},e.purgeUsers=function(){r.adminRedirect("/admin"),r.updateRoot("userPurgeInProgress",!0),t(function(){o.purgeUsers().then(function(){r.adminRedirect("/"),o.logoutUser().then(function(){t(e.purgeDone,5e3)},function(e){s.error(e),r.updateRoot("userPurgeInProgress",!1)})},function(r){s.error(r),t(e.purgeDone,5e3)})},5e3)},e.syncDb=function(n,a){"users"==n&&(r.adminRedirect("/admin"),r.updateRoot("userSyncInProgress",!0),o.syncUsers(a).then(function(){"toloc"==a?(r.adminRedirect("/"),o.logoutUser().then(function(){t(e.syncDone,5e3)},function(e){s.error(e),r.updateRoot("userSyncInProgress",!0)})):t(e.syncDone,5e3)},function(r){s.error(r),t(e.syncDone,5e3)}))},e.pageUsers=function(){return Math.ceil(e.userRes.length/e.userShowOnPage)},e.purgeDone=function(){s.notify("User database has been purged."),r.updateRoot("userPurgeInProgress",!1)},e.syncDone=function(){s.notify("User database has been synced."),r.updateRoot("userSyncInProgress",!0)}}]),angular.module("stage").factory("stAdminSvc",["$location","$parse","$rootScope","$window",function(e,t,r,n){return{adminRedirect:function(t){e.path(t)},updateRoot:function(e,r){var n=t("$rootScope."+e);n=r},whatEnv:function(){return n.env}}}]),angular.module("stage").factory("stAdminUserSvc",["$filter","stUserSvc",function(e,t){return{actionDone:function(e){switch(e){case"purge":var t="purged";$rootScope.userPurgeInProgress=!1;break;case"sync":var t="synced";$rootScope.userSyncInProgress=!1}t&&stTickerSvc.notify("User database has been "+t+".")},populateUsers:function(){return t.query()},searchUsers:function(t,r){return e("userfind")(t,r)}}}]),angular.module("stage").controller("stDevDbCtrl",["$scope","$http","$timeout",function(e,t,r){e.ddbView=null,e.ddbConsoleType=null,e.localMongoStatus=!1,e.remoteMongoStatus=!1,e.azureStreamStatus=!1,e.ddbStreamWell="",e.ddbChangeView=function(t){switch(t){case"overview":e.ddbView=null,e.ddbConsoleType=null;break;case"localMongo":e.ddbView=t,e.ddbConsoleType="cmd",e.ddbStreamWell="Connecting...",e.localMongoStatus||e.ddbConnect(t);break;case"remoteMongo":e.ddbView=t,e.ddbConsoleType="cmd",e.ddbStreamWell="Connecting...",e.remoteMongoStatus||e.ddbConnect(t);break;case"azureStream":e.ddbView=t,e.ddbConsoleType="view",e.ddbStreamWell="Connecting...",e.azureStreamStatus||e.ddbConnect(t)}},e.ddbCommand=function(){var r=e.ddbView;if(console.log(r),"cmd"!==e.ddbConsoleType)return!1;console.log("Type is cmd"),console.log(e.ddbCmdBar),console.log(e.ddbIsConnected(r));var n=!1;switch(r){case"localMongo":n=e.localMongoStatus;break;case"remoteMongo":n=e.remoteMongoStatus}return n&&e.ddbCmdBar?void t.post("/api/devdash/"+r+"/command",{cmd:e.ddbCmdBar}).then(function(t){e.ddbCmdBar=""}):!1},e.ddbConnect=function(n){t.get("/api/devdash/"+n+"/connect",{check:!0}).then(function(){"localMongo"==n?(e.ddbStreamWell+="done!\n",e.localMongoStatus=!0,r(function(){e.ddbStream(n)},500)):"remoteMongo"==n?(e.ddbStreamWell+="done!\n",e.remoteMongoStatus=!0,r(function(){e.ddbStream(n)},500)):"azureStream"==n&&(e.ddbStreamWell+="done!\n",e.azureStreamStatus=!0,r(function(){e.ddbStream(n)},500))})},e.ddbDisconnect=function(t){"localMongo"==t?e.localMongoStatus=!1:"remoteMongo"==t?e.remoteMongoStatus=!1:"azureStream"==t&&(e.azureStreamStatus=!1)},e.ddbIsConnected=function(r){t.get("/api/devdash/"+r+"/status",{check:!0}).then(function(t){return"localMongo"==r?"Connected"==t.data&&200==t.status?(e.localMongoStatus=!0,!0):(e.localMongoStatus=!1,!1):"remoteMongo"==r?"Connected"==t.data&&200==t.status?(e.remoteMongoStatus=!0,!0):(e.remoteMongoStatus=!1,!1):"azureStream"==r?"Connected"==t.data&&200==t.status?(e.azureStreamStatus=!0,!0):(e.azureStreamStatus=!1,!1):void 0})},e.ddbStream=function(t){if("undefined"!=typeof EventSource){var n=new EventSource("/api/devdash/"+t+"/stream");n.addEventListener("message",function(t){e.$apply(function(){var n=JSON.parse(t.data);n=n.replace(/\[0m/g,""),n=n.replace(/\[36m/g,""),n=unescape(encodeURIComponent(n)),console.log(n),e.ddbStreamWell+=n.trim()+"\n",r(function(){var e=document.getElementById("streamWell");e.scrollTop=e.scrollHeight},50)})},!1),n.addEventListener("error",function(r){e.$apply(function(){e.ddbDisconnect(t),e.ddbStreamWell+="The stream for "+t+" has been unexpectedly closed.\n"}),n.close()},!1)}else e.ddbStreamWell="This browser does not support streaming.\n"}}]),angular.module("stage").factory("stDevDbSvc",["$http","$q","$rootScope",function(e,t,r){return{}}]),angular.module("stage").filter("userStartPage",function(){return function(e,t){return t=+t,e.slice(t)}}),angular.module("stage").filter("userfind",function(){return function(e,t){var r=[];return angular.forEach(e,function(e){try{var n=new RegExp(t,"gi")}catch(o){return[]}(e.userName.match(n)||e.firstName.match(n)||e.lastName.match(n)||""==t)&&r.push({_id:e._id,userName:e.userName,firstName:e.firstName,lastName:e.lastName,roles:e.roles})}),r}}),angular.module("stage").controller("stMainCtrl",["$scope",function(e){}]),angular.module("stage").controller("stTickerCtrl",["$scope","stTickerSvc",function(e,t){e.custom=t.custom(),e.reset=t.reset(),e.showAll=function(){$(".ticker-container").toggleClass("expanded")}}]),angular.module("stage").factory("stTickerSvc",function(){function e(e,r,s){e=r?" "+e:e;var a=$("<span></span>").addClass("ticker-msg").html(e);s&&(s=$("<span></span>").addClass("iconic iconic-sm "+s),a.prepend(s)),r&&a.addClass(r),$("#ticker").addClass("on").prepend(a),setTimeout(function(){$("#ticker").removeClass("on")},300),n?(clearTimeout(o),o=setTimeout(function(){t(),n=!1},8e3)):(n=!0,o=setTimeout(function(){t(),n=!1},8e3))}function t(){$("#ticker #ftrmsg").remove();var e=$("<span></span>").html(r).attr("id","ftrmsg");$("#ticker").addClass("on").prepend(e),setTimeout(function(){$("#ticker").removeClass("on")},300)}var r="//tardigrade/node | Tardigrade Digital &copy; 2016",n=!1,o=null;return{custom:function(t,r,n){return t?void e(t,r,"iconic-"+n):!1},notify:function(t){return t?void e(t,"success","iconic-circle-check"):!1},error:function(t){return t?void e(t,"error","iconic-circle-x"):!1},info:function(t){return t?void e(t,null,"iconic-info"):!1},reset:function(){t()}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YWdlLmpzIiwiYWNjb3VudC9zdEF1dGhTdmMuanMiLCJhY2NvdW50L3N0SWRlbnRpdHlTdmMuanMiLCJhY2NvdW50L3N0TG9naW5DdHJsLmpzIiwiYWNjb3VudC9zdExvZ2luV2lkZ2V0LmpzIiwiYWNjb3VudC9zdFByb2ZpbGVDdHJsLmpzIiwiYWNjb3VudC9zdFVzZXJTdmMuanMiLCJhZG1pbi9zdEFkbWluQ3RybC5qcyIsImFkbWluL3N0QWRtaW5TdmMuanMiLCJhZG1pbi9zdEFkbWluVXNlclN2Yy5qcyIsImFkbWluL3N0RGV2RGJDdHJsLmpzIiwiYWRtaW4vc3REZXZEYlN2Yy5qcyIsImFkbWluL3N0UGFnZUZpbHRlci5qcyIsImFkbWluL3N0VXNlckZpbHRlci5qcyIsIm1haW4vc3RNYWluQ3RybC5qcyIsInRpY2tlci9zdFRpY2tlckN0cmwuanMiLCJ0aWNrZXIvc3RUaWNrZXJTdmMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJyb3V0ZVJvbGVDaGVja3MiLCJhZG1pbiIsImF1dGgiLCJzdEF1dGhTdmMiLCJhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlIiwidXNlciIsImF1dGhvcml6ZUF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGUiLCJndWVzdCIsInVuYXV0aGVudGljYXRlZFVzZXIiLCJodG1sNU1vZGUiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicmVzb2x2ZSIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJG9uIiwiZXZ0IiwiY3VycmVudCIsInByZXZpb3VzIiwicmVqZWN0aW9uIiwicGF0aCIsImZhY3RvcnkiLCIkaHR0cCIsIiRxIiwic3RJZGVudGl0eVN2YyIsInN0VXNlclN2YyIsImF1dGhlbnRpY2F0ZVVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiZGZkIiwiZGVmZXIiLCJwb3N0IiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsInN1Y2Nlc3MiLCJleHRlbmQiLCJjdXJyZW50VXNlciIsInByb21pc2UiLCJjcmVhdGVVc2VyIiwibmV3VXNlckRhdGEiLCJuZXdVc2VyIiwiJHNhdmUiLCJyZWplY3QiLCJyZWFzb24iLCJsb2dvdXRVc2VyIiwibG9nb3V0IiwidW5kZWZpbmVkIiwicHVyZ2VVc2VycyIsIm1ldGhvZCIsInVybCIsImNvbnNvbGUiLCJsb2ciLCJzeW5jVXNlcnMiLCJkaXJlY3Rpb24iLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiY29sbGVjdGlvbiIsInVwZGF0ZUN1cnJlbnRVc2VyIiwiY2xvbmUiLCJjb3B5IiwiJHVwZGF0ZSIsImlzQXV0aGVudGljYXRlZCIsInJvbGUiLCJpc0F1dGhvcml6ZWQiLCIkd2luZG93Iiwic3RhZ2VVc2VyIiwidGhpcyIsInJvbGVzIiwiaW5kZXhPZiIsIiRzY29wZSIsInN0VGlja2VyU3ZjIiwiaWRlbnRpdHkiLCJzaWduaW4iLCIkaW52YWxpZCIsIiQiLCJsb2dpbldpZGdldCIsImFkZENsYXNzIiwiZXJyb3IiLCJub3RpZnkiLCJzaWdub3V0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwiZW1haWwiLCJ1c2VyTmFtZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwidXBkYXRlIiwibGVuZ3RoIiwiJHJlc291cmNlIiwiVXNlclJlc291cmNlIiwiX2lkIiwiaXNBcnJheSIsInB1cmdlIiwicHJvdG90eXBlIiwiaXNBZG1pbiIsIiR0aW1lb3V0Iiwic3RBZG1pblN2YyIsInN0QWRtaW5Vc2VyU3ZjIiwiZW52Iiwid2hhdEVudiIsInVzZXJzIiwicG9wdWxhdGVVc2VycyIsInVzZXJSZXMiLCJ1c2VyRmllbGQiLCJ1c2VyUmV2ZXJzZSIsInVzZXJDdXJyZW50UGFnZSIsInVzZXJTaG93T25QYWdlIiwidXNlclN5bmNFbmFibGVkIiwidXNlclN5bmNEaXIiLCJmaWx0ZXJVc2VycyIsInJlcyIsInNlYXJjaFVzZXJzIiwidXNlclNlYXJjaCIsInNvcnRVc2VycyIsImZpZWxkIiwiaW52ZXJ0IiwiYWRtaW5SZWRpcmVjdCIsInVwZGF0ZVJvb3QiLCJwdXJnZURvbmUiLCJzeW5jRGIiLCJzeW5jRGlyIiwic3luY0RvbmUiLCJwYWdlVXNlcnMiLCJNYXRoIiwiY2VpbCIsIiRwYXJzZSIsIm9iaiIsInZhbCIsInJvb3RPYmoiLCIkZmlsdGVyIiwiYWN0aW9uRG9uZSIsImFjdCIsImFjdFZlcmIiLCJ1c2VyUHVyZ2VJblByb2dyZXNzIiwidXNlclN5bmNJblByb2dyZXNzIiwicXVlcnkiLCJkZGJWaWV3IiwiZGRiQ29uc29sZVR5cGUiLCJsb2NhbE1vbmdvU3RhdHVzIiwicmVtb3RlTW9uZ29TdGF0dXMiLCJhenVyZVN0cmVhbVN0YXR1cyIsImRkYlN0cmVhbVdlbGwiLCJkZGJDaGFuZ2VWaWV3Iiwic3ZjIiwiZGRiQ29ubmVjdCIsImRkYkNvbW1hbmQiLCJkZGJDbWRCYXIiLCJkZGJJc0Nvbm5lY3RlZCIsInN2Y1N0YXQiLCJjbWQiLCJnZXQiLCJjaGVjayIsImRkYlN0cmVhbSIsImRkYkRpc2Nvbm5lY3QiLCJzdGF0dXMiLCJzdHJtU291cmNlIiwiRXZlbnRTb3VyY2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCIkYXBwbHkiLCJtc2ciLCJKU09OIiwicGFyc2UiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsInRyaW0iLCJzdyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJlcnIiLCJjbG9zZSIsImZpbHRlciIsImlucHV0Iiwic3RhcnQiLCJzbGljZSIsInEiLCJtYXRjaGVkIiwiZm9yRWFjaCIsInUiLCJleHAiLCJSZWdFeHAiLCJlIiwibWF0Y2giLCJwdXNoIiwiY3VzdG9tIiwicmVzZXQiLCJzaG93QWxsIiwidG9nZ2xlQ2xhc3MiLCJhZGRUaWNrZXIiLCJsdmwiLCJpYyIsIm1zZ29iaiIsImh0bWwiLCJwcmVwZW5kIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwidG9zZXQiLCJjbGVhclRpbWVvdXQiLCJ0byIsInJlc2V0VGlja2VyIiwicmVtb3ZlIiwiZnRyIiwiYXR0ciIsImluZm8iXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFBQyxPQUFBLFNBQUEsYUFBQSxVQUFBLGNBQUEsY0FFQUQsUUFBQUMsT0FBQSxTQUFBQyxRQUFBLGlCQUFBLG9CQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsSUFDQUMsT0FBQUMsTUFBQSxZQUFBLFNBQUFDLEdBQUEsTUFBQUEsR0FBQUMsNkJBQUEsWUFDQUMsTUFBQUgsTUFBQSxZQUFBLFNBQUFDLEdBQUEsTUFBQUEsR0FBQUcsd0NBQ0FDLE9BQUFMLE1BQUEsWUFBQSxTQUFBQyxHQUFBLE1BQUFBLEdBQUFLLHlCQUdBVCxHQUFBVSxXQUFBLEdBQ0FYLEVBQ0FZLEtBQUEsS0FDQUMsWUFBQSxzQkFDQUMsV0FBQSxlQUVBRixLQUFBLFVBQ0FDLFlBQUEsOEJBQ0FDLFdBQUEsY0FDQUMsUUFBQWIsRUFBQUMsUUFFQVMsS0FBQSxjQUNBQyxZQUFBLHNDQUNBQyxXQUFBLGNBQ0FDLFFBQUFiLEVBQUFDLFFBRUFTLEtBQUEsb0JBQ0FDLFlBQUEsaUNBQ0FDLFdBQUEsY0FDQUMsUUFBQWIsRUFBQUMsUUFFQVMsS0FBQSx1QkFDQUMsWUFBQSxvQ0FDQUMsV0FBQSxjQUNBQyxRQUFBYixFQUFBQyxRQUVBUyxLQUFBLHNCQUNBQyxZQUFBLG9DQUNBQyxXQUFBLGNBQ0FDLFFBQUFiLEVBQUFDLFFBRUFTLEtBQUEscUJBQ0FDLFlBQUEsbUNBQ0FDLFdBQUEsY0FDQUMsUUFBQWIsRUFBQUMsUUFFQVMsS0FBQSxVQUNBQyxZQUFBLGdDQUNBQyxXQUFBLGNBQ0FDLFFBQUFiLEVBQUFPLFFBRUFHLEtBQUEsV0FDQUMsWUFBQSxpQ0FDQUMsV0FBQSxlQUNBQyxRQUFBYixFQUFBTyxRQUVBRyxLQUFBLGFBQ0FDLFlBQUEsbUNBQ0FDLFdBQUEsZ0JBQ0FDLFFBQUFiLEVBQUFLLE9BRUFTLFdB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QUFHLEtBQ0FoSSxFQUFBLG1CQUFBaUksUUFDQSxJQUFBVCxHQUFBeEgsRUFBQSxpQkFBQXlILEtBQUFTLEdBQUFDLEtBQUEsS0FBQSxTQUNBbkksR0FBQSxXQUFBRSxTQUFBLE1BQUF3SCxRQUFBRixHQUNBRyxXQUFBLFdBQUEzSCxFQUFBLFdBQUE0SCxZQUFBLE9BQUEsS0F6QkEsR0FBQU0sR0FBQSxxREFDQUwsR0FBQSxFQUNBRSxFQUFBLElBMEJBLFFBQ0FkLE9BQUEsU0FBQTFCLEVBQUErQixFQUFBQyxHQUFBLE1BQUFoQyxPQUFBOEIsR0FBQTlCLEVBQUErQixFQUFBLFVBQUFDLElBQUEsR0FDQW5ILE9BQUEsU0FBQW1GLEdBQUEsTUFBQUEsT0FBQThCLEdBQUE5QixFQUFBLFVBQUEsd0JBQUEsR0FDQXBGLE1BQUEsU0FBQW9GLEdBQUEsTUFBQUEsT0FBQThCLEdBQUE5QixFQUFBLFFBQUEsb0JBQUEsR0FDQTZDLEtBQUEsU0FBQTdDLEdBQUEsTUFBQUEsT0FBQThCLEdBQUE5QixFQUFBLEtBQUEsZ0JBQUEsR0FDQTJCLE1BQUEsV0FBQWMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ3N0YWdlJywgWyduZ1Jlc291cmNlJywgJ25nUm91dGUnLCAndWkuZ3JhdmF0YXInLCAnbmdBbmltYXRlJ10pO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3N0YWdlJykuY29uZmlnKGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xyXG4gIHZhciByb3V0ZVJvbGVDaGVja3MgPSB7XHJcbiAgICBhZG1pbjogeyBhdXRoOiAvKkBuZ0luamVjdCovIGZ1bmN0aW9uKHN0QXV0aFN2YykgeyByZXR1cm4gc3RBdXRoU3ZjLmF1dGhvcml6ZUN1cnJlbnRVc2VyRm9yUm91dGUoJ2FkbWluJyk7IH0gfSxcclxuICAgIHVzZXI6IHsgYXV0aDogLypAbmdJbmplY3QqLyBmdW5jdGlvbihzdEF1dGhTdmMpIHsgcmV0dXJuIHN0QXV0aFN2Yy5hdXRob3JpemVBdXRoZW50aWNhdGVkVXNlckZvclJvdXRlKCk7IH0gfSxcclxuICAgIGd1ZXN0OiB7IGF1dGg6IC8qQG5nSW5qZWN0Ki8gZnVuY3Rpb24oc3RBdXRoU3ZjKSB7IHJldHVybiBzdEF1dGhTdmMudW5hdXRoZW50aWNhdGVkVXNlcigpOyB9IH1cclxuICB9XHJcblxyXG4gICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcclxuICAkcm91dGVQcm92aWRlclxyXG4gICAgLndoZW4oJy8nLCB7IFxyXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9tYWluL21haW4nLCBcclxuICAgICAgY29udHJvbGxlcjogJ3N0TWFpbkN0cmwnXHJcbiAgICB9KVxyXG4gICAgLndoZW4oJy9hZG1pbicsIHtcclxuICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvYWRtaW4vdmlld3MvYWRtaW4nLCBcclxuICAgICAgY29udHJvbGxlcjogJ3N0QWRtaW5DdHJsJywgXHJcbiAgICAgIHJlc29sdmU6IHJvdXRlUm9sZUNoZWNrcy5hZG1pblxyXG4gICAgfSlcclxuICAgIC53aGVuKCcvYWRtaW4vZGRiJywge1xyXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9hZG1pbi92aWV3cy9kZXYtZGFzaGJvYXJkJywgXHJcbiAgICAgIGNvbnRyb2xsZXI6ICdzdERldkRiQ3RybCcsIFxyXG4gICAgICByZXNvbHZlOiByb3V0ZVJvbGVDaGVja3MuYWRtaW5cclxuICAgIH0pXHJcbiAgICAud2hlbignL2FkbWluL3VzZXJzL2FkZCcsIHtcclxuICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvYWRtaW4vdmlld3MvYWRkLXVzZXInLCBcclxuICAgICAgY29udHJvbGxlcjogJ3N0QWRtaW5DdHJsJywgXHJcbiAgICAgIHJlc29sdmU6IHJvdXRlUm9sZUNoZWNrcy5hZG1pblxyXG4gICAgfSlcclxuICAgIC53aGVuKCcvYWRtaW4vdXNlcnMvZGVsZXRlJywge1xyXG4gICAgICB0ZW1wbGF0ZVVybDogJy9wYXJ0aWFscy9hZG1pbi92aWV3cy9kZWxldGUtdXNlcicsIFxyXG4gICAgICBjb250cm9sbGVyOiAnc3RBZG1pbkN0cmwnLCBcclxuICAgICAgcmVzb2x2ZTogcm91dGVSb2xlQ2hlY2tzLmFkbWluXHJcbiAgICB9KVxyXG4gICAgLndoZW4oJy9hZG1pbi91c2Vycy9wdXJnZScsIHtcclxuICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvYWRtaW4vdmlld3MvcHVyZ2UtdXNlcnMnLCBcclxuICAgICAgY29udHJvbGxlcjogJ3N0QWRtaW5DdHJsJywgXHJcbiAgICAgIHJlc29sdmU6IHJvdXRlUm9sZUNoZWNrcy5hZG1pblxyXG4gICAgfSlcclxuICAgIC53aGVuKCcvYWRtaW4vdXNlcnMvc3luYycsIHtcclxuICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvYWRtaW4vdmlld3Mvc3luYy11c2VycycsIFxyXG4gICAgICBjb250cm9sbGVyOiAnc3RBZG1pbkN0cmwnLCBcclxuICAgICAgcmVzb2x2ZTogcm91dGVSb2xlQ2hlY2tzLmFkbWluXHJcbiAgICB9KVxyXG4gICAgLndoZW4oJy9sb2dpbicsIHtcclxuICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvYWNjb3VudC92aWV3cy9sb2dpbicsIFxyXG4gICAgICBjb250cm9sbGVyOiAnc3RMb2dpbkN0cmwnLFxyXG4gICAgICByZXNvbHZlOiByb3V0ZVJvbGVDaGVja3MuZ3Vlc3RcclxuICAgIH0pXHJcbiAgICAud2hlbignL3NpZ251cCcsIHtcclxuICAgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvYWNjb3VudC92aWV3cy9zaWdudXAnLCBcclxuICAgICAgY29udHJvbGxlcjogJ3N0U2lnbnVwQ3RybCcsXHJcbiAgICAgIHJlc29sdmU6IHJvdXRlUm9sZUNoZWNrcy5ndWVzdFxyXG4gICAgfSlcclxuICAgIC53aGVuKCcvc2V0dGluZ3MnLCB7XHJcbiAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2FjY291bnQvdmlld3Mvc2V0dGluZ3MnLCBcclxuICAgICAgY29udHJvbGxlcjogJ3N0UHJvZmlsZUN0cmwnLFxyXG4gICAgICByZXNvbHZlOiByb3V0ZVJvbGVDaGVja3MudXNlclxyXG4gICAgfSlcclxuICAgIC5vdGhlcndpc2Uoe1xyXG4gICAgICByZWRpcmVjdFRvOiAnLydcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdzdGFnZScpLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAkbG9jYXRpb24pIHtcclxuICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbihldnQsIGN1cnJlbnQsIHByZXZpb3VzLCByZWplY3Rpb24pIHtcclxuICAgIGlmKHJlamVjdGlvbiA9PT0gJ25vdCBhdXRob3JpemVkJykge1xyXG4gICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgfVxyXG4gIH0pXHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdzdGFnZScpLmZhY3RvcnkoJ3N0QXV0aFN2YycsIGZ1bmN0aW9uKCRodHRwLCAkcSwgc3RJZGVudGl0eVN2Yywgc3RVc2VyU3ZjKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIC8vIGF1dGhlbnRpY2F0ZVVzZXI6IFZlcmlmaWVzIGxvZ2luIGNyZWRlbnRpYWxzIGFuZCBzaWducyBpbiB1c2VyXHJcbiAgICBhdXRoZW50aWNhdGVVc2VyOiBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcclxuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICRodHRwLnBvc3QoJy9sb2dpbicsIHt1c2VybmFtZTp1c2VybmFtZSwgcGFzc3dvcmQ6cGFzc3dvcmR9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICB2YXIgdXNlciA9IG5ldyBzdFVzZXJTdmMoKTtcclxuICAgICAgICAgIGRlbGV0ZSByZXNwb25zZS5kYXRhLnVzZXJbJ2hhc2hlZF9wd2QnXTtcclxuICAgICAgICAgIGRlbGV0ZSByZXNwb25zZS5kYXRhLnVzZXJbJ3NhbHQnXTtcclxuICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHVzZXIsIHJlc3BvbnNlLmRhdGEudXNlcik7XHJcbiAgICAgICAgICBzdElkZW50aXR5U3ZjLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgICAgICAgIGRmZC5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGRmZC5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyBjcmVhdGVVc2VyOiBDcmVhdGVzIGEgbmV3IHVzZXJcclxuICAgIGNyZWF0ZVVzZXI6IGZ1bmN0aW9uKG5ld1VzZXJEYXRhKSB7XHJcbiAgICAgIHZhciBuZXdVc2VyID0gbmV3IHN0VXNlclN2YyhuZXdVc2VyRGF0YSk7XHJcbiAgICAgIHZhciBkZmQgPSAkcS5kZWZlcigpO1xyXG4gICAgICBcclxuICAgICAgbmV3VXNlci4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcclxuICAgICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBkZmQucmVqZWN0KHJlc3BvbnNlLmRhdGEucmVhc29uKTtcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8vIGxvZ291dFVzZXI6IEVuZHMgdGhlIGN1cnJlbnQgdXNlcidzIHNlc3Npb25cclxuICAgIGxvZ291dFVzZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcclxuICAgICAgJGh0dHAucG9zdCgnL2xvZ291dCcsIHtsb2dvdXQ6IHRydWV9KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHN0SWRlbnRpdHlTdmMuY3VycmVudFVzZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8vcHVyZ2VVc2VyczogUmVtb3ZlcyBhbGwgdXNlcnMgYW5kIHJlc3RvcmVzIHVzZXIgZGF0YWJhc2UgdG8gZGVmYXVsdHNcclxuICAgIHB1cmdlVXNlcnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgZGZkID0gJHEuZGVmZXIoKTtcclxuICAgICAgJGh0dHAoe1xyXG4gICAgICAgIG1ldGhvZDogJ1BVUkdFJyxcclxuICAgICAgICB1cmw6ICcvYXBpL3VzZXJzJ1xyXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGRhdGFiYXNlIGhhcyBiZWVuIHB1cmdlZCcpO1xyXG4gICAgICAgIGRmZC5yZXNvbHZlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gZGZkLnByb21pc2U7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyBzeW5jVXNlcnM6IFN5bmNzIHVzZXIgZGF0YWJhc2UgY29sbGVjdGlvblxyXG4gICAgc3luY1VzZXJzOiBmdW5jdGlvbihkaXJlY3Rpb24pIHtcclxuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICRodHRwKHtcclxuICAgICAgICBtZXRob2Q6ICdDT1BZJyxcclxuICAgICAgICB1cmw6ICcvYXBpL2RiJyxcclxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBjb2xsZWN0aW9uOiAndXNlcnMnLFxyXG4gICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25cclxuICAgICAgICB9XHJcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgZGF0YWJhc2UgaGFzIGJlZW4gc3luY2VkJyk7XHJcbiAgICAgICAgZGZkLnJlc29sdmUoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBkZmQucHJvbWlzZTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8vIHVwZGF0ZUN1cnJlbnRVc2VyOiBVcGRhdGVzIHByb2ZpbGUgb2YgY3VycmVudCB1c2VyXHJcbiAgICB1cGRhdGVDdXJyZW50VXNlcjogZnVuY3Rpb24obmV3VXNlckRhdGEpIHtcclxuICAgICAgdmFyIGRmZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAgIFxyXG4gICAgICB2YXIgY2xvbmUgPSBhbmd1bGFyLmNvcHkoc3RJZGVudGl0eVN2Yy5jdXJyZW50VXNlcik7XHJcbiAgICAgIGFuZ3VsYXIuZXh0ZW5kKGNsb25lLCBuZXdVc2VyRGF0YSk7XHJcbiAgICAgIGNsb25lLiR1cGRhdGUoKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHN0SWRlbnRpdHlTdmMuY3VycmVudFVzZXIgPSBjbG9uZTtcclxuICAgICAgICBkZmQucmVzb2x2ZSgpO1xyXG4gICAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGRmZC5yZWplY3QocmVzcG9uc2UuZGF0YS5yZWFzb24pO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGRmZC5wcm9taXNlO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgLy8gYXV0aG9yaXplQXV0aGVudGljYXRlZFVzZXJGb3JSb3V0ZTogQ2hlY2tzIHdoZXRoZXIgdXNlciBpcyBzaWduZWQgaW5cclxuICAgIGF1dGhvcml6ZUF1dGhlbnRpY2F0ZWRVc2VyRm9yUm91dGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZihzdElkZW50aXR5U3ZjLmlzQXV0aGVudGljYXRlZCgpKSB7IHJldHVybiB0cnVlOyB9XHJcbiAgICAgIGVsc2UgeyByZXR1cm4gJHEucmVqZWN0KCdub3QgYXV0aG9yaXplZCcpOyB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyBhdXRob3JpemVDdXJyZW50VXNlckZvclJvdXRlOiBDaGVja3Mgd2hldGhlciBjdXJlbnQgdXNlciBoYXMgcm9sZVxyXG4gICAgYXV0aG9yaXplQ3VycmVudFVzZXJGb3JSb3V0ZTogZnVuY3Rpb24ocm9sZSkge1xyXG4gICAgICBpZihzdElkZW50aXR5U3ZjLmlzQXV0aG9yaXplZChyb2xlKSkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gICAgICBlbHNlIHsgcmV0dXJuICRxLnJlamVjdCgnbm90IGF1dGhvcml6ZWQnKTsgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgLy8gdW5hdXRoZW50aWNhdGVkVXNlcjogQ2hlY2tzIHdoZXRoZXIgdXNlciBpcyBub3Qgc2lnbmVkIGluXHJcbiAgICB1bmF1dGhlbnRpY2F0ZWRVc2VyOiBmdW5jdGlvbigpIHtcclxuICAgICAgaWYoIXN0SWRlbnRpdHlTdmMuaXNBdXRoZW50aWNhdGVkKCkpIHsgcmV0dXJuIHRydWU7IH1cclxuICAgICAgZWxzZSB7IHJldHVybiAkcS5yZWplY3QoJ3VzZXIgc2lnbmVkIGluJyk7IH1cclxuICAgIH1cclxuICB9XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdzdGFnZScpLmZhY3RvcnkoJ3N0SWRlbnRpdHlTdmMnLCBmdW5jdGlvbigkd2luZG93LCBzdFVzZXJTdmMpIHtcclxuICB2YXIgY3VycmVudFVzZXI7XHJcbiAgaWYoJHdpbmRvdy5zdGFnZVVzZXIpIHsgXHJcbiAgICBjdXJyZW50VXNlciA9IG5ldyBzdFVzZXJTdmMoKTtcclxuICAgIGRlbGV0ZSAkd2luZG93LnN0YWdlVXNlclsnaGFzaGVkX3B3ZCddO1xyXG4gICAgZGVsZXRlICR3aW5kb3cuc3RhZ2VVc2VyWydzYWx0J107XHJcbiAgICBhbmd1bGFyLmV4dGVuZChjdXJyZW50VXNlciwgJHdpbmRvdy5zdGFnZVVzZXIpO1xyXG4gIH1cclxuICByZXR1cm4ge1xyXG4gICAgY3VycmVudFVzZXI6IGN1cnJlbnRVc2VyLFxyXG4gICAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbigpIHsgcmV0dXJuICEhdGhpcy5jdXJyZW50VXNlcjsgfSxcclxuICAgIGlzQXV0aG9yaXplZDogZnVuY3Rpb24ocm9sZSkgeyByZXR1cm4gISF0aGlzLmN1cnJlbnRVc2VyICYmIHRoaXMuY3VycmVudFVzZXIucm9sZXMuaW5kZXhPZihyb2xlKSA+IC0xOyB9XHJcbiAgfVxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnc3RhZ2UnKS5jb250cm9sbGVyKCdzdExvZ2luQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGxvY2F0aW9uLCBzdEF1dGhTdmMsIHN0SWRlbnRpdHlTdmMsIHN0VGlja2VyU3ZjKSB7XHJcbiAgJHNjb3BlLmlkZW50aXR5ID0gc3RJZGVudGl0eVN2YztcclxuICAkc2NvcGUuc2lnbmluID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgICBpZighdXNlcm5hbWUgfHwgIXBhc3N3b3JkIHx8IHVzZXJuYW1lLiRpbnZhbGlkIHx8IHBhc3N3b3JkLiRpbnZhbGlkKSB7XHJcbiAgICAgIGlmKCF1c2VybmFtZSB8fCB1c2VybmFtZS4kaW52YWxpZCkgeyAkKGxvZ2luV2lkZ2V0LnVzZXJuYW1lKS5hZGRDbGFzcygnaW52YWxpZCcpOyB9XHJcbiAgICAgIGlmKCFwYXNzd29yZCB8fCBwYXNzd29yZC4kaW52YWxpZCkgeyAkKGxvZ2luV2lkZ2V0LnBhc3N3b3JkKS5hZGRDbGFzcygnaW52YWxpZCcpOyB9XHJcbiAgICAgIHN0VGlja2VyU3ZjLmVycm9yKCdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZC4nKTtcclxuICAgICAgcmV0dXJuIGZhbHNlOyAgXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgc3RBdXRoU3ZjLmF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHN1Y2Nlc3MpIHtcclxuICAgICAgICBpZihzdWNjZXNzKSB7XHJcbiAgICAgICAgICB1c2VybmFtZSA9ICcnO1xyXG4gICAgICAgICAgcGFzc3dvcmQgPSAnJztcclxuICAgICAgICAgICRzY29wZS51c2VybmFtZSA9ICcnO1xyXG4gICAgICAgICAgJHNjb3BlLnBhc3N3b3JkID0gJyc7XHJcbiAgICAgICAgICB2YXIgcGF0aCA9IHN0SWRlbnRpdHlTdmMuaXNBdXRob3JpemVkKCdhZG1pbicpID8gJy9hZG1pbicgOiAnLyc7XHJcbiAgICAgICAgICBzdFRpY2tlclN2Yy5ub3RpZnkoJ1lvdSBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IGF1dGhlbnRpY2F0ZWQuJyk7XHJcbiAgICAgICAgICBpZigkbG9jYXRpb24ucGF0aCgnbG9naW4nKSkgeyAkbG9jYXRpb24ucGF0aChwYXRoKTsgfVxyXG4gICAgICAgICAgaWYoc3RJZGVudGl0eVN2Yy5pc0F1dGhvcml6ZWQoJ2FkbWluJykpIHsgJGxvY2F0aW9uLnBhdGgocGF0aCk7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7IHN0VGlja2VyU3ZjLmVycm9yKCdJbnZhbGlkIGVtYWlsIGFkZHJlc3Mgb3IgcGFzc3dvcmQgd2FzIGdpdmVuLicpIH1cclxuICAgICAgfSk7ICAgICAgXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5zaWdub3V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBzdEF1dGhTdmMubG9nb3V0VXNlcigpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICRzY29wZS51c2VybmFtZSA9IFwiXCI7XHJcbiAgICAgICRzY29wZS5wYXNzd29yZCA9IFwiXCI7XHJcbiAgICAgIHN0VGlja2VyU3ZjLm5vdGlmeSgnWW91IGhhdmUgYmVlbiBzaWduZWQgb3V0LicpO1xyXG4gICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgfSlcclxuICB9XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdzdGFnZScpLmRpcmVjdGl2ZSgnc3RMb2dpbldpZGdldCcsIGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiB7XHJcbiAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2FjY291bnQvdmlld3MvbG9naW4td2lkZ2V0J1xyXG4gIH07XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdzdGFnZScpLmNvbnRyb2xsZXIoJ3N0UHJvZmlsZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIHN0QXV0aFN2Yywgc3RJZGVudGl0eVN2Yywgc3RUaWNrZXJTdmMpIHtcclxuICAkc2NvcGUuZW1haWwgPSBzdElkZW50aXR5U3ZjLmN1cnJlbnRVc2VyLnVzZXJOYW1lO1xyXG4gICRzY29wZS5maXJzdE5hbWUgPSBzdElkZW50aXR5U3ZjLmN1cnJlbnRVc2VyLmZpcnN0TmFtZTtcclxuICAkc2NvcGUubGFzdE5hbWUgPSBzdElkZW50aXR5U3ZjLmN1cnJlbnRVc2VyLmxhc3ROYW1lO1xyXG4gIFxyXG4gICRzY29wZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBuZXdVc2VyRGF0YSA9IHtcclxuICAgICAgdXNlck5hbWU6ICRzY29wZS5lbWFpbCxcclxuICAgICAgZmlyc3ROYW1lOiAkc2NvcGUuZmlyc3ROYW1lLFxyXG4gICAgICBsYXN0TmFtZTogJHNjb3BlLmxhc3ROYW1lXHJcbiAgICB9XHJcblxyXG4gICAgaWYoJHNjb3BlLnBhc3N3b3JkICYmICRzY29wZS5wYXNzd29yZC5sZW5ndGggPiAwKSB7IG5ld1VzZXJEYXRhLnBhc3N3b3JkID0gJHNjb3BlLnBhc3N3b3JkOyB9XHJcblxyXG4gICAgc3RBdXRoU3ZjLnVwZGF0ZUN1cnJlbnRVc2VyKG5ld1VzZXJEYXRhKS50aGVuKFxyXG4gICAgICBmdW5jdGlvbigpIHsgc3RUaWNrZXJTdmMubm90aWZ5KCdZb3VyIHByb2ZpbGUgaGFzIGJlZW4gdXBkYXRlZC4nKSB9LCBcclxuICAgICAgZnVuY3Rpb24ocmVhc29uKSB7IHN0VGlja2VyU3ZjLmVycm9yKHJlYXNvbik7IH1cclxuICAgICk7XHJcbiAgfVxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnc3RhZ2UnKS5mYWN0b3J5KCdzdFVzZXJTdmMnLCBmdW5jdGlvbigkcmVzb3VyY2UpIHtcclxuICB2YXIgVXNlclJlc291cmNlID0gJHJlc291cmNlKCcvYXBpL3VzZXJzLzppZCcsIHtfaWQ6IFwiQGlkXCJ9LCB7XHJcbiAgICB1cGRhdGU6IHttZXRob2Q6ICdQVVQnLCBpc0FycmF5OiBmYWxzZX0sXHJcbiAgICBwdXJnZToge21ldGhvZDogJ1BVUkdFJywgaXNBcnJheTogZmFsc2V9XHJcbiAgfSk7XHJcbiAgXHJcbiAgVXNlclJlc291cmNlLnByb3RvdHlwZS5pc0FkbWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yb2xlcyAmJiB0aGlzLnJvbGVzLmluZGV4T2YoJ2FkbWluJykgPiAtMTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIFVzZXJSZXNvdXJjZTtcclxufSkiLCJhbmd1bGFyLm1vZHVsZSgnc3RhZ2UnKS5jb250cm9sbGVyKCdzdEFkbWluQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsIHN0QWRtaW5TdmMsIHN0QWRtaW5Vc2VyU3ZjLCBzdEF1dGhTdmMsIHN0VGlja2VyU3ZjKSB7XHJcbiAgJHNjb3BlLmVudiA9IHN0QWRtaW5TdmMud2hhdEVudigpO1xyXG4gICRzY29wZS51c2VycyA9IHN0QWRtaW5Vc2VyU3ZjLnBvcHVsYXRlVXNlcnMoKTtcclxuICAkc2NvcGUudXNlclJlcyA9ICRzY29wZS51c2VycztcclxuICAkc2NvcGUudXNlckZpZWxkID0gJ3VzZXJOYW1lJztcclxuICAkc2NvcGUudXNlclJldmVyc2UgPSBmYWxzZTtcclxuICAkc2NvcGUudXNlckN1cnJlbnRQYWdlID0gMDtcclxuICAkc2NvcGUudXNlclNob3dPblBhZ2UgPSAnMTAnO1xyXG4gICRzY29wZS51c2VyU3luY0VuYWJsZWQgPSAkc2NvcGUuZW52ID09ICdkZXZlbG9wbWVudCcgPyB0cnVlIDogZmFsc2U7XHJcbiAgJHNjb3BlLnVzZXJTeW5jRGlyID0gJ3RvbG9jJztcclxuXHJcbiAgJHNjb3BlLmZpbHRlclVzZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAkc2NvcGUudXNlclJlcyA9IFtdO1xyXG4gICAgdmFyIHJlcyA9IHN0QWRtaW5Vc2VyU3ZjLnNlYXJjaFVzZXJzKCRzY29wZS51c2VycywgJHNjb3BlLnVzZXJTZWFyY2gpO1xyXG4gICAgJHNjb3BlLnVzZXJSZXMgPSByZXM7XHJcbiAgICAkc2NvcGUudXNlckN1cnJlbnRQYWdlID0gMDtcclxuICB9XHJcblxyXG4gICRzY29wZS5zb3J0VXNlcnMgPSBmdW5jdGlvbihmaWVsZCwgaW52ZXJ0KSB7XHJcbiAgICAkc2NvcGUudXNlclJldmVyc2UgPSAoJHNjb3BlLnVzZXJGaWVsZCA9PT0gZmllbGQgPyAhJHNjb3BlLnVzZXJSZXZlcnNlIDogZmFsc2UpO1xyXG4gICAgaWYoaW52ZXJ0KSB7ICRzY29wZS51c2VyUmV2ZXJzZSA9ICgkc2NvcGUudXNlckZpZWxkID09PSBmaWVsZCA/ICRzY29wZS51c2VyUmV2ZXJzZSA6IHRydWUpOyB9XHJcbiAgICAkc2NvcGUudXNlckZpZWxkID0gZmllbGQ7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5jcmVhdGVVc2VyID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbmV3VXNlckRhdGEgPSB7XHJcbiAgICAgIHVzZXJOYW1lOiAkc2NvcGUuZW1haWwsXHJcbiAgICAgIHBhc3N3b3JkOiAkc2NvcGUucGFzc3dvcmQsXHJcbiAgICAgIGZpcnN0TmFtZTogJHNjb3BlLmZpcnN0TmFtZSxcclxuICAgICAgbGFzdE5hbWU6ICRzY29wZS5sYXN0TmFtZVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgc3RBdXRoU3ZjLmNyZWF0ZVVzZXIobmV3VXNlckRhdGEpLnRoZW4oXHJcbiAgICAgIGZ1bmN0aW9uKCkgeyBzdFRpY2tlclN2Yy5ub3RpZnkoJ0NyZWF0ZWQgdXNlciBhY2NvdW50ICcgKyBuZXdVc2VyRGF0YS51c2VyTmFtZSArICAnLicpOyBzdEFkbWluU3ZjLmFkbWluUmVkaXJlY3QoJy9hZG1pbicpOyB9LCBcclxuICAgICAgZnVuY3Rpb24ocmVhc29uKSB7IHN0VGlja2VyU3ZjLmVycm9yKHJlYXNvbik7IH1cclxuICAgICk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5wdXJnZVVzZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBzdEFkbWluU3ZjLmFkbWluUmVkaXJlY3QoJy9hZG1pbicpO1xyXG4gICAgc3RBZG1pblN2Yy51cGRhdGVSb290KCd1c2VyUHVyZ2VJblByb2dyZXNzJywgdHJ1ZSk7XHJcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgc3RBdXRoU3ZjLnB1cmdlVXNlcnMoKS50aGVuKFxyXG4gICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzdEFkbWluU3ZjLmFkbWluUmVkaXJlY3QoJy8nKTtcclxuICAgICAgICAgICAgc3RBdXRoU3ZjLmxvZ291dFVzZXIoKS50aGVuKFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHsgJHRpbWVvdXQoJHNjb3BlLnB1cmdlRG9uZSwgNTAwMCk7IH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgeyBcclxuICAgICAgICAgICAgICBzdFRpY2tlclN2Yy5lcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgIHN0QWRtaW5TdmMudXBkYXRlUm9vdCgndXNlclB1cmdlSW5Qcm9ncmVzcycsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9LCBcclxuICAgICAgICBmdW5jdGlvbihyZWFzb24pIHsgc3RUaWNrZXJTdmMuZXJyb3IocmVhc29uKTsgJHRpbWVvdXQoJHNjb3BlLnB1cmdlRG9uZSwgNTAwMCk7IH1cclxuICAgICAgKTtcclxuICAgIH0sIDUwMDApO1xyXG4gIH1cclxuICBcclxuICAkc2NvcGUuc3luY0RiID0gZnVuY3Rpb24oY29sbGVjdGlvbiwgc3luY0Rpcikge1xyXG4gICAgaWYoY29sbGVjdGlvbiA9PSAndXNlcnMnKSB7XHJcbiAgICAgIHN0QWRtaW5TdmMuYWRtaW5SZWRpcmVjdCgnL2FkbWluJyk7XHJcbiAgICAgIHN0QWRtaW5TdmMudXBkYXRlUm9vdCgndXNlclN5bmNJblByb2dyZXNzJywgdHJ1ZSk7XHJcbiAgICAgIHN0QXV0aFN2Yy5zeW5jVXNlcnMoc3luY0RpcikudGhlbihcclxuICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKHN5bmNEaXIgPT0gJ3RvbG9jJykge1xyXG4gICAgICAgICAgICBzdEFkbWluU3ZjLmFkbWluUmVkaXJlY3QoJy8nKTtcclxuICAgICAgICAgICAgc3RBdXRoU3ZjLmxvZ291dFVzZXIoKS50aGVuKFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkgeyAkdGltZW91dCgkc2NvcGUuc3luY0RvbmUsIDUwMDApOyB9LFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgc3RUaWNrZXJTdmMuZXJyb3IocmVhc29uKTtcclxuICAgICAgICAgICAgICAgIHN0QWRtaW5TdmMudXBkYXRlUm9vdCgndXNlclN5bmNJblByb2dyZXNzJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7ICR0aW1lb3V0KCRzY29wZS5zeW5jRG9uZSwgNTAwMCk7IH1cclxuICAgICAgIH0sXHJcbiAgICAgICAgZnVuY3Rpb24ocmVhc29uKSB7IHN0VGlja2VyU3ZjLmVycm9yKHJlYXNvbik7ICR0aW1lb3V0KCRzY29wZS5zeW5jRG9uZSwgNTAwMCk7IH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLnBhZ2VVc2VycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIE1hdGguY2VpbCgkc2NvcGUudXNlclJlcy5sZW5ndGgvJHNjb3BlLnVzZXJTaG93T25QYWdlKTtcclxuICB9XHJcbiAgXHJcbiAgJHNjb3BlLnB1cmdlRG9uZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgc3RUaWNrZXJTdmMubm90aWZ5KCdVc2VyIGRhdGFiYXNlIGhhcyBiZWVuIHB1cmdlZC4nKTsgXHJcbiAgICBzdEFkbWluU3ZjLnVwZGF0ZVJvb3QoJ3VzZXJQdXJnZUluUHJvZ3Jlc3MnLCBmYWxzZSk7XHJcbiAgfVxyXG4gIFxyXG4gICRzY29wZS5zeW5jRG9uZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgc3RUaWNrZXJTdmMubm90aWZ5KCdVc2VyIGRhdGFiYXNlIGhhcyBiZWVuIHN5bmNlZC4nKTsgXHJcbiAgICBzdEFkbWluU3ZjLnVwZGF0ZVJvb3QoJ3VzZXJTeW5jSW5Qcm9ncmVzcycsIHRydWUpO1xyXG4gIH1cclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ3N0YWdlJykuZmFjdG9yeSgnc3RBZG1pblN2YycsIGZ1bmN0aW9uKCRsb2NhdGlvbiwgJHBhcnNlLCAkcm9vdFNjb3BlLCAkd2luZG93KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIGFkbWluUmVkaXJlY3Q6IGZ1bmN0aW9uKHBhdGgpIHtcclxuICAgICAgJGxvY2F0aW9uLnBhdGgocGF0aCk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlUm9vdDogZnVuY3Rpb24ob2JqLCB2YWwpIHtcclxuICAgICAgdmFyIHJvb3RPYmogPSAkcGFyc2UoJyRyb290U2NvcGUuJyArIG9iaik7XHJcbiAgICAgIHJvb3RPYmogPSB2YWw7XHJcbiAgICB9LFxyXG4gICAgd2hhdEVudjogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiAkd2luZG93LmVudjtcclxuICAgIH1cclxuICB9O1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnc3RhZ2UnKS5mYWN0b3J5KCdzdEFkbWluVXNlclN2YycsIGZ1bmN0aW9uKCRmaWx0ZXIsIHN0VXNlclN2Yykge1xyXG4gIHJldHVybiB7XHJcbiAgICBhY3Rpb25Eb25lOiBmdW5jdGlvbihhY3QpIHtcclxuICAgICAgc3dpdGNoKGFjdCkge1xyXG4gICAgICAgIGNhc2UgJ3B1cmdlJzpcclxuICAgICAgICAgIHZhciBhY3RWZXJiID0gJ3B1cmdlZCdcclxuICAgICAgICAgICRyb290U2NvcGUudXNlclB1cmdlSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnc3luYyc6XHJcbiAgICAgICAgICB2YXIgYWN0VmVyYiA9ICdzeW5jZWQnXHJcbiAgICAgICAgICAkcm9vdFNjb3BlLnVzZXJTeW5jSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgaWYoYWN0VmVyYikge3N0VGlja2VyU3ZjLm5vdGlmeSgnVXNlciBkYXRhYmFzZSBoYXMgYmVlbiAnICsgYWN0VmVyYiArICcuJyk7IH1cclxuICAgIH0sXHJcbiAgICBwb3B1bGF0ZVVzZXJzOiBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHN0VXNlclN2Yy5xdWVyeSgpO1xyXG4gICAgfSxcclxuICAgIHNlYXJjaFVzZXJzOiBmdW5jdGlvbih1c2VycywgcXVlcnkpIHtcclxuICAgICAgcmV0dXJuICRmaWx0ZXIoJ3VzZXJmaW5kJykodXNlcnMsIHF1ZXJ5KTtcclxuICAgIH1cclxuICB9O1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnc3RhZ2UnKS5jb250cm9sbGVyKCdzdERldkRiQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICR0aW1lb3V0KSB7XHJcbiAgJHNjb3BlLmRkYlZpZXcgPSBudWxsXHJcbiAgJHNjb3BlLmRkYkNvbnNvbGVUeXBlID0gbnVsbFxyXG4gICRzY29wZS5sb2NhbE1vbmdvU3RhdHVzID0gZmFsc2U7XHJcbiAgJHNjb3BlLnJlbW90ZU1vbmdvU3RhdHVzID0gZmFsc2U7XHJcbiAgJHNjb3BlLmF6dXJlU3RyZWFtU3RhdHVzID0gZmFsc2U7XHJcbiAgJHNjb3BlLmRkYlN0cmVhbVdlbGwgPSAnJztcclxuXHJcbiAgJHNjb3BlLmRkYkNoYW5nZVZpZXcgPSBmdW5jdGlvbihzdmMpIHtcclxuICAgIHN3aXRjaChzdmMpIHtcclxuICAgICAgY2FzZSAnb3ZlcnZpZXcnOiBcclxuICAgICAgICAkc2NvcGUuZGRiVmlldyA9IG51bGw7XHJcbiAgICAgICAgJHNjb3BlLmRkYkNvbnNvbGVUeXBlID0gbnVsbDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnbG9jYWxNb25nbyc6XHJcbiAgICAgICAgJHNjb3BlLmRkYlZpZXcgPSBzdmM7XHJcbiAgICAgICAgJHNjb3BlLmRkYkNvbnNvbGVUeXBlID0gJ2NtZCc7XHJcbiAgICAgICAgJHNjb3BlLmRkYlN0cmVhbVdlbGwgPSAnQ29ubmVjdGluZy4uLic7XHJcbiAgICAgICAgaWYoISRzY29wZS5sb2NhbE1vbmdvU3RhdHVzKSAkc2NvcGUuZGRiQ29ubmVjdChzdmMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdyZW1vdGVNb25nbyc6XHJcbiAgICAgICAgJHNjb3BlLmRkYlZpZXcgPSBzdmM7XHJcbiAgICAgICAgJHNjb3BlLmRkYkNvbnNvbGVUeXBlID0gJ2NtZCc7XHJcbiAgICAgICAgJHNjb3BlLmRkYlN0cmVhbVdlbGwgPSAnQ29ubmVjdGluZy4uLic7XHJcbiAgICAgICAgaWYoISRzY29wZS5yZW1vdGVNb25nb1N0YXR1cykgJHNjb3BlLmRkYkNvbm5lY3Qoc3ZjKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnYXp1cmVTdHJlYW0nOlxyXG4gICAgICAgICRzY29wZS5kZGJWaWV3ID0gc3ZjO1xyXG4gICAgICAgICRzY29wZS5kZGJDb25zb2xlVHlwZSA9ICd2aWV3JztcclxuICAgICAgICAkc2NvcGUuZGRiU3RyZWFtV2VsbCA9ICdDb25uZWN0aW5nLi4uJztcclxuICAgICAgICBpZighJHNjb3BlLmF6dXJlU3RyZWFtU3RhdHVzKSAkc2NvcGUuZGRiQ29ubmVjdChzdmMpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgJHNjb3BlLmRkYkNvbW1hbmQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzdmMgPSAkc2NvcGUuZGRiVmlldztcclxuICAgIGNvbnNvbGUubG9nKHN2Yyk7XHJcbiAgICBpZigkc2NvcGUuZGRiQ29uc29sZVR5cGUgIT09ICdjbWQnKSByZXR1cm4gZmFsc2U7XHJcbiAgICBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ1R5cGUgaXMgY21kJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5kZGJDbWRCYXIpO1xyXG4gICAgICBjb25zb2xlLmxvZygkc2NvcGUuZGRiSXNDb25uZWN0ZWQoc3ZjKSk7XHJcbiAgICAgIHZhciBzdmNTdGF0ID0gZmFsc2VcclxuICAgICAgc3dpdGNoKHN2Yykge1xyXG4gICAgICAgIGNhc2UgJ2xvY2FsTW9uZ28nOlxyXG4gICAgICAgICAgc3ZjU3RhdCA9ICRzY29wZS5sb2NhbE1vbmdvU3RhdHVzO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncmVtb3RlTW9uZ28nOlxyXG4gICAgICAgICAgc3ZjU3RhdCA9ICRzY29wZS5yZW1vdGVNb25nb1N0YXR1cztcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGlmKHN2Y1N0YXQgJiYgJHNjb3BlLmRkYkNtZEJhcikge1xyXG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvZGV2ZGFzaC8nICsgc3ZjICsgJy9jb21tYW5kJywge2NtZDogJHNjb3BlLmRkYkNtZEJhcn0pLnRoZW4oZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgICAkc2NvcGUuZGRiQ21kQmFyID0gJyc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAkc2NvcGUuZGRiQ29ubmVjdCA9IGZ1bmN0aW9uKHN2Yykge1xyXG4gICAgJGh0dHAuZ2V0KCcvYXBpL2RldmRhc2gvJyArIHN2YyArICcvY29ubmVjdCcsIHtjaGVjazogdHJ1ZX0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmKHN2YyA9PSAnbG9jYWxNb25nbycpIHtcclxuICAgICAgICAkc2NvcGUuZGRiU3RyZWFtV2VsbCArPSAnZG9uZSFcXG4nO1xyXG4gICAgICAgICRzY29wZS5sb2NhbE1vbmdvU3RhdHVzID0gdHJ1ZTtcclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHskc2NvcGUuZGRiU3RyZWFtKHN2Yyk7fSwgNTAwKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKHN2YyA9PSAncmVtb3RlTW9uZ28nKSB7XHJcbiAgICAgICAgJHNjb3BlLmRkYlN0cmVhbVdlbGwgKz0gJ2RvbmUhXFxuJztcclxuICAgICAgICAkc2NvcGUucmVtb3RlTW9uZ29TdGF0dXMgPSB0cnVlO1xyXG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyRzY29wZS5kZGJTdHJlYW0oc3ZjKTt9LCA1MDApO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoc3ZjID09ICdhenVyZVN0cmVhbScpIHtcclxuICAgICAgICAkc2NvcGUuZGRiU3RyZWFtV2VsbCArPSAnZG9uZSFcXG4nO1xyXG4gICAgICAgICRzY29wZS5henVyZVN0cmVhbVN0YXR1cyA9IHRydWU7XHJcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7JHNjb3BlLmRkYlN0cmVhbShzdmMpO30sIDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgJHNjb3BlLmRkYkRpc2Nvbm5lY3QgPSBmdW5jdGlvbihzdmMpIHtcclxuICAgIC8vICRodHRwLmdldCgnL2FwaS9kZXZkYXNoLycgKyBzdmMgKyAnL2Rpc2Nvbm5lY3QnLCB7Y2hlY2s6IHRydWV9KS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZihzdmMgPT0gJ2xvY2FsTW9uZ28nKSAkc2NvcGUubG9jYWxNb25nb1N0YXR1cyA9IGZhbHNlO1xyXG4gICAgICBlbHNlIGlmKHN2YyA9PSAncmVtb3RlTW9uZ28nKSAkc2NvcGUucmVtb3RlTW9uZ29TdGF0dXMgPSBmYWxzZTtcclxuICAgICAgZWxzZSBpZihzdmMgPT0gJ2F6dXJlU3RyZWFtJykgJHNjb3BlLmF6dXJlU3RyZWFtU3RhdHVzID0gZmFsc2U7XHJcbiAgICAvLyB9KTtcclxuICB9XHJcblxyXG4gICRzY29wZS5kZGJJc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKHN2Yykge1xyXG4gICAgJGh0dHAuZ2V0KCcvYXBpL2RldmRhc2gvJyArIHN2YyArICcvc3RhdHVzJywge2NoZWNrOiB0cnVlfSkudGhlbihmdW5jdGlvbihyZXMpIHtcclxuICAgICAgaWYoc3ZjID09ICdsb2NhbE1vbmdvJykge1xyXG4gICAgICAgIGlmKHJlcy5kYXRhID09ICdDb25uZWN0ZWQnICYmIHJlcy5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAkc2NvcGUubG9jYWxNb25nb1N0YXR1cyA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUubG9jYWxNb25nb1N0YXR1cyA9IGZhbHNlO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKHN2YyA9PSAncmVtb3RlTW9uZ28nKSB7XHJcbiAgICAgICAgaWYocmVzLmRhdGEgPT0gJ0Nvbm5lY3RlZCcgJiYgcmVzLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICRzY29wZS5yZW1vdGVNb25nb1N0YXR1cyA9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUucmVtb3RlTW9uZ29TdGF0dXMgPSBmYWxzZTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihzdmMgPT0gJ2F6dXJlU3RyZWFtJykge1xyXG4gICAgICAgIGlmKHJlcy5kYXRhID09ICdDb25uZWN0ZWQnICYmIHJlcy5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAkc2NvcGUuYXp1cmVTdHJlYW1TdGF0dXM9IHRydWU7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAkc2NvcGUuYXp1cmVTdHJlYW1TdGF0dXMgPSBmYWxzZTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgJHNjb3BlLmRkYlN0cmVhbSA9IGZ1bmN0aW9uKHN2Yykge1xyXG4gICAgaWYodHlwZW9mKEV2ZW50U291cmNlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgdmFyIHN0cm1Tb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9hcGkvZGV2ZGFzaC8nICsgc3ZjICsgJy9zdHJlYW0nKTtcclxuICAgICAgc3RybVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIG1zZyA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICAvLyBSZXBsYWNlIHNwZWNpYWwgY2hhcmFjdGVyc1xyXG4gICAgICAgICAgbXNnID0gbXNnLnJlcGxhY2UoL1xcWzBtL2csICcnKTtcclxuICAgICAgICAgIG1zZyA9IG1zZy5yZXBsYWNlKC9cXFszNm0vZywgJycpO1xyXG4gICAgICAgICAgLy8gU3RyaXAgb3V0IFVuaWNvZGUgY2hhcmFjdGVycyBcclxuICAgICAgICAgIG1zZyA9IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChtc2cpKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcbiAgICAgICAgICAkc2NvcGUuZGRiU3RyZWFtV2VsbCArPSBtc2cudHJpbSgpICsgJ1xcbic7XHJcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHN3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0cmVhbVdlbGwnKTtcclxuICAgICAgICAgICAgc3cuc2Nyb2xsVG9wID0gc3cuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgICAgfSwgNTApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LCBmYWxzZSk7XHJcbiAgICAgIHN0cm1Tb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJHNjb3BlLmRkYkRpc2Nvbm5lY3Qoc3ZjKTtcclxuICAgICAgICAgICRzY29wZS5kZGJTdHJlYW1XZWxsICs9ICdUaGUgc3RyZWFtIGZvciAnICsgc3ZjICsgJyBoYXMgYmVlbiB1bmV4cGVjdGVkbHkgY2xvc2VkLlxcbic7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3RybVNvdXJjZS5jbG9zZSgpO1xyXG4gICAgICB9LCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlICRzY29wZS5kZGJTdHJlYW1XZWxsID0gJ1RoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHN0cmVhbWluZy5cXG4nO1xyXG4gIH1cclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ3N0YWdlJykuZmFjdG9yeSgnc3REZXZEYlN2YycsIGZ1bmN0aW9uKCRodHRwLCAkcSwgJHJvb3RTY29wZSkge1xyXG4gIHJldHVybiB7XHJcbiAgfTtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ3N0YWdlJykuZmlsdGVyKCd1c2VyU3RhcnRQYWdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQsIHN0YXJ0KSB7XHJcbiAgICAgICAgc3RhcnQgPSArc3RhcnQ7XHJcbiAgICAgICAgcmV0dXJuIGlucHV0LnNsaWNlKHN0YXJ0KTtcclxuICAgIH1cclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ3N0YWdlJykuZmlsdGVyKCd1c2VyZmluZCcsIGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBmdW5jdGlvbih1c2VycywgcSkge1xyXG4gICAgdmFyIG1hdGNoZWQgPSBbXTtcclxuICAgIGFuZ3VsYXIuZm9yRWFjaCh1c2VycywgZnVuY3Rpb24odSkge1xyXG4gICAgICB0cnkgeyB2YXIgZXhwID0gbmV3IFJlZ0V4cChxLCAnZ2knKTsgfSBjYXRjaChlKSB7IHJldHVybiBbXTsgfVxyXG4gICAgICBpZih1LnVzZXJOYW1lLm1hdGNoKGV4cCkgfHwgdS5maXJzdE5hbWUubWF0Y2goZXhwKSB8fCB1Lmxhc3ROYW1lLm1hdGNoKGV4cCkgfHwgcSA9PSAnJykge1xyXG4gICAgICAgIG1hdGNoZWQucHVzaCh7XHJcbiAgICAgICAgICBfaWQ6IHUuX2lkLCBcclxuICAgICAgICAgIHVzZXJOYW1lOiB1LnVzZXJOYW1lLCBcclxuICAgICAgICAgIGZpcnN0TmFtZTogdS5maXJzdE5hbWUsIFxyXG4gICAgICAgICAgbGFzdE5hbWU6IHUubGFzdE5hbWUsXHJcbiAgICAgICAgICByb2xlczogdS5yb2xlc1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG1hdGNoZWQ7XHJcbiAgfVxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnc3RhZ2UnKS5jb250cm9sbGVyKCdzdE1haW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcblxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnc3RhZ2UnKS5jb250cm9sbGVyKCdzdFRpY2tlckN0cmwnLCBbJyRzY29wZScsICdzdFRpY2tlclN2YycsIGZ1bmN0aW9uKCRzY29wZSwgc3RUaWNrZXJTdmMpIHtcclxuICAkc2NvcGUuY3VzdG9tID0gc3RUaWNrZXJTdmMuY3VzdG9tKCk7XHJcbiAgJHNjb3BlLnJlc2V0ID0gc3RUaWNrZXJTdmMucmVzZXQoKTtcclxuICAkc2NvcGUuc2hvd0FsbCA9IGZ1bmN0aW9uKCkgeyAkKCcudGlja2VyLWNvbnRhaW5lcicpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpOyB9XHJcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgnc3RhZ2UnKS5mYWN0b3J5KCdzdFRpY2tlclN2YycsIGZ1bmN0aW9uKCkge1xyXG4gIHZhciBmdHIgPSAnLy90YXJkaWdyYWRlL25vZGUgfCBUYXJkaWdyYWRlIERpZ2l0YWwgJmNvcHk7IDIwMTYnO1xyXG4gIHZhciB0b3NldCA9IGZhbHNlO1xyXG4gIHZhciB0byA9IG51bGw7XHJcbiAgXHJcbiAgZnVuY3Rpb24gYWRkVGlja2VyKG1zZywgbHZsLCBpYykge1xyXG4gICAgbXNnID0gbHZsID8gKCcgJyArIG1zZykgOiBtc2c7XHJcbiAgICB2YXIgbXNnb2JqID0gJCgnPHNwYW4+PC9zcGFuPicpLmFkZENsYXNzKCd0aWNrZXItbXNnJykuaHRtbChtc2cpO1xyXG4gICAgaWYoaWMpIHsgXHJcbiAgICAgIGljID0gJCgnPHNwYW4+PC9zcGFuPicpLmFkZENsYXNzKCdpY29uaWMgaWNvbmljLXNtICcgKyBpYyk7IFxyXG4gICAgICBtc2dvYmoucHJlcGVuZChpYyk7IFxyXG4gICAgfVxyXG4gICAgaWYobHZsKSB7IG1zZ29iai5hZGRDbGFzcyhsdmwpOyB9XHJcbiAgICAkKCcjdGlja2VyJykuYWRkQ2xhc3MoJ29uJykucHJlcGVuZChtc2dvYmopO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHskKCcjdGlja2VyJykucmVtb3ZlQ2xhc3MoJ29uJyk7fSwgMzAwKTtcclxuICAgIGlmKCF0b3NldCkgeyB0b3NldCA9IHRydWU7IHRvID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgcmVzZXRUaWNrZXIoKTsgdG9zZXQgPSBmYWxzZTsgfSwgODAwMCk7IH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjbGVhclRpbWVvdXQodG8pO1xyXG4gICAgICB0byA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHJlc2V0VGlja2VyKCk7IHRvc2V0ID0gZmFsc2U7IH0sIDgwMDApO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBmdW5jdGlvbiByZXNldFRpY2tlcigpIHtcclxuICAgICQoJyN0aWNrZXIgI2Z0cm1zZycpLnJlbW92ZSgpO1xyXG4gICAgdmFyIG1zZ29iaiA9ICQoJzxzcGFuPjwvc3Bhbj4nKS5odG1sKGZ0cikuYXR0cignaWQnLCAnZnRybXNnJyk7XHJcbiAgICAkKCcjdGlja2VyJykuYWRkQ2xhc3MoJ29uJykucHJlcGVuZChtc2dvYmopO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHskKCcjdGlja2VyJykucmVtb3ZlQ2xhc3MoJ29uJyk7fSwgMzAwKTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGN1c3RvbTogZnVuY3Rpb24obXNnLCBsdmwsIGljKSB7IGlmKCFtc2cpIHsgcmV0dXJuIGZhbHNlOyB9OyBhZGRUaWNrZXIobXNnLCBsdmwsICgnaWNvbmljLScgKyBpYykpOyB9LFxyXG4gICAgbm90aWZ5OiBmdW5jdGlvbihtc2cpIHsgaWYoIW1zZykgeyByZXR1cm4gZmFsc2U7IH07IGFkZFRpY2tlcihtc2csICdzdWNjZXNzJywgJ2ljb25pYy1jaXJjbGUtY2hlY2snKTsgfSxcclxuICAgIGVycm9yOiBmdW5jdGlvbihtc2cpIHsgaWYoIW1zZykgeyByZXR1cm4gZmFsc2U7IH07IGFkZFRpY2tlcihtc2csICdlcnJvcicsICdpY29uaWMtY2lyY2xlLXgnKTsgfSxcclxuICAgIGluZm86IGZ1bmN0aW9uKG1zZykgeyBpZighbXNnKSB7IHJldHVybiBmYWxzZTsgfTsgYWRkVGlja2VyKG1zZywgbnVsbCwgJ2ljb25pYy1pbmZvJyk7IH0sXHJcbiAgICByZXNldDogZnVuY3Rpb24oKSB7IHJlc2V0VGlja2VyKCk7IH1cclxuICB9XHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
